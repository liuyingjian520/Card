<html lang="zh-CN"><head>
  <meta charset="UTF-8">
  <title>QQ群邀请卡片</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="format-detection" content="telephone=no">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <style>
    :root {
      --primary-hue: 220;
      --secondary-hue: 280;
      --accent-hue: 340;
      
      --gradient-1: linear-gradient(135deg, 
        hsl(var(--primary-hue), 70%, 60%) 0%, 
        hsl(var(--secondary-hue), 65%, 55%) 50%,
        hsl(var(--accent-hue), 60%, 65%) 100%);
      
      --gradient-2: linear-gradient(45deg,
        hsla(var(--primary-hue), 80%, 70%, 0.9) 0%,
        hsla(var(--secondary-hue), 75%, 65%, 0.8) 50%,
        hsla(var(--accent-hue), 70%, 60%, 0.7) 100%);
        
      --glass-bg: rgba(255, 255, 255, 0.15);
      --glass-border: rgba(255, 255, 255, 0.2);
      --glass-shadow: rgba(0, 0, 0, 0.3);
      
      --text-primary: rgba(255, 255, 255, 0.95);
      --text-secondary: rgba(255, 255, 255, 0.8);
      --text-accent: rgba(255, 255, 255, 0.9);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 15px;
      overflow: hidden;
      position: relative;
      background: #000;
    }
    
    /* 二次元背景层 */
    .background-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: -10;
      overflow: hidden;
    }
    
    .bg-layer {
      position: absolute;
      width: 100%;
      height: 100%;
      background: var(--gradient-1);
      animation: bgShift 20s ease-in-out infinite;
      opacity: 0.8;
    }
    
    .particle-container {
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }
    
    .particle {
      position: absolute;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      pointer-events: none;
      animation: float 6s ease-in-out infinite;
    }
    
    /* 玻璃态卡片 */
    .card {
      backdrop-filter: blur(30px) saturate(180%);
      background: var(--glass-bg);
      border: 1px solid var(--glass-border);
      border-radius: 28px;
      padding: 45px 35px 35px;
      max-width: 420px;
      width: 100%;
      width: 100%;
      text-align: center;
      box-shadow: 
        0 30px 60px var(--glass-shadow),
        inset 0 1px 0 rgba(255, 255, 255, 0.3),
        0 0 0 1px rgba(255, 255, 255, 0.05);
      position: relative;
      overflow: hidden;
      animation: cardEntrance 1.2s cubic-bezier(0.34, 1.56, 0.64, 1);
      transform-origin: center;
    }
    
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
      animation: shimmer 3s infinite;
    }
    
    .card::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(
        from 0deg,
        transparent 340deg,
        rgba(255, 255, 255, 0.05) 360deg
      );
      animation: rotate 8s linear infinite;
      pointer-events: none;
    }
    
    .card-content {
      position: relative;
      z-index: 2;
    }
    
    /* 主题指示器 */
    .theme-indicator {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      animation: themeFloat 4s ease-in-out infinite;
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 10;
    }
    
    .theme-indicator:hover {
      transform: scale(1.1);
      background: rgba(255, 255, 255, 0.2);
    }
    
    /* 二次元风格群组图标 */
    .group-icon {
      width: 120px;
      height: 120px;
      margin: 0 auto 25px;
      position: relative;
      cursor: pointer;
      animation: iconPulse 3s ease-in-out infinite;
    }
    
    .icon-bg {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: var(--gradient-2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 50px;
      color: white;
      position: relative;
      overflow: hidden;
      box-shadow: 
        0 15px 35px rgba(0, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      border: 3px solid rgba(255, 255, 255, 0.2);
    }
    
    .icon-bg::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -100%;
      width: 200%;
      height: 200%;
      background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: iconShine 4s infinite;
    }
    
    .group-icon:hover .icon-bg {
      transform: scale(1.05) rotate(5deg);
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
    }
    
    /* 标题和描述 */
    .title {
      font-size: 32px;
      font-weight: 800;
      margin-bottom: 15px;
      color: var(--text-primary);
      line-height: 1.2;
      background: linear-gradient(135deg, #ffffff, #f0f0f0, #ffffff);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: titleGlow 4s ease-in-out infinite;
      text-shadow: 0 2px 10px rgba(255, 255, 255, 0.1);
      letter-spacing: 1px;
    }
    
    .subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      margin-bottom: 35px;
      line-height: 1.6;
      opacity: 0;
      animation: fadeInUp 1s ease 0.3s forwards;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .group-info {
      display: flex;
      justify-content: space-around;
      margin: 25px 0 35px;
      opacity: 0;
      animation: fadeInUp 1s ease 0.5s forwards;
    }
    
    .info-item {
      text-align: center;
      flex: 1;
    }
    
    .info-number {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
      display: block;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .info-label {
      font-size: 14px;
      color: var(--text-secondary);
      margin-top: 4px;
      opacity: 0.8;
    }
    
    /* 加入按钮 */
    .join-btn {
      display: block;
      width: 100%;
      padding: 22px 0;
      background: var(--gradient-2);
      color: white;
      font-size: 20px;
      font-weight: 700;
      border: none;
      border-radius: 30px;
      text-decoration: none;
      cursor: pointer;
      position: relative;
      overflow: hidden;
      transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
      box-shadow: 
        0 15px 35px rgba(0, 0, 0, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);
      letter-spacing: 1px;
      opacity: 0;
      animation: fadeInUp 1s ease 0.7s forwards;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    .join-btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
      transition: left 0.6s ease;
    }
    
    .join-btn:hover {
      transform: translateY(-5px) scale(1.03);
      box-shadow: 
        0 20px 45px rgba(0, 0, 0, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.5);
    }
    
    .join-btn:hover::before {
      left: 100%;
    }
    
    .join-btn:active {
      transform: translateY(-2px) scale(1.01);
    }
    
    /* 环境信息 */
    .env-info {
      margin-top: 25px;
      padding: 18px;
      background: rgba(255, 255, 255, 0.08);
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.5;
      backdrop-filter: blur(10px);
      opacity: 0;
      animation: fadeInUp 1s ease 0.9s forwards;
    }
    
    .time-info {
      margin-top: 20px;
      font-size: 15px;
      color: var(--text-secondary);
      opacity: 0;
      animation: fadeInUp 1s ease 1.1s forwards;
    }
    
    /* 加载动画 */
    .loading {
      display: none;
      margin-top: 20px;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .loading-dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.8);
      animation: loadingPulse 1.4s ease-in-out infinite both;
    }
    
    .loading-dot:nth-child(1) { animation-delay: -0.32s; }
    .loading-dot:nth-child(2) { animation-delay: -0.16s; }
    .loading-dot:nth-child(3) { animation-delay: 0s; }
    
    /* 动画定义 */
    @keyframes bgShift {
      0%, 100% { 
        filter: hue-rotate(0deg) brightness(1);
        transform: scale(1);
      }
      25% { 
        filter: hue-rotate(90deg) brightness(1.1);
        transform: scale(1.05);
      }
      50% { 
        filter: hue-rotate(180deg) brightness(0.9);
        transform: scale(1.02);
      }
      75% { 
        filter: hue-rotate(270deg) brightness(1.1);
        transform: scale(1.05);
      }
    }
    
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-20px) rotate(120deg); }
      66% { transform: translateY(10px) rotate(240deg); }
    }
    
    @keyframes cardEntrance {
      0% {
        opacity: 0;
        transform: scale(0.8) translateY(50px) rotateX(20deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0px) rotateX(0deg);
      }
    }
    
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    @keyframes shimmer {
      0% { opacity: 0; }
      50% { opacity: 1; }
      100% { opacity: 0; }
    }
    
    @keyframes rotate {
      100% { transform: rotate(360deg); }
    }
    
    @keyframes themeFloat {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }
    
    @keyframes iconPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }
    
    @keyframes iconShine {
      0% { left: -100%; }
      100% { left: 100%; }
    }
    
    @keyframes titleGlow {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    
    @keyframes loadingPulse {
      0%, 80%, 100% { 
        transform: scale(0.8); 
        opacity: 0.5; 
      }
      40% { 
        transform: scale(1.2); 
        opacity: 1; 
      }
    }
    
    /* 响应式设计 */
    @media (max-width: 480px) {
      .card {
        padding: 35px 25px 25px;
        margin: 10px;
        border-radius: 24px;
      }
      
      .group-icon {
        width: 90px;
        height: 90px;
      }
      
      .icon-bg {
        font-size: 40px;
      }
      
      .title {
        font-size: 26px;
      }
      
      .subtitle {
        font-size: 16px;
      }
      
      .join-btn {
        padding: 20px 0;
        font-size: 18px;
      }
    }
    
    @media (max-width: 320px) {
      .card {
        padding: 30px 20px;
      }
      
      .group-icon {
        width: 80px;
        height: 80px;
      }
      
      .title {
        font-size: 24px;
      }
      
      .subtitle {
        font-size: 14px;
      }
      
      .join-btn {
        padding: 18px 0;
        font-size: 16px;
      }
    }
    
    /* 触摸优化 */
    @media (hover: none) and (pointer: coarse) {
      .join-btn:active {
        transform: scale(0.98);
      }
      
      .group-icon:active .icon-bg {
        transform: scale(0.95);
      }
      
      .theme-indicator:active {
        transform: scale(0.95);
      }
    }
  </style>
</head>
<body>
  <div class="background-container">
    <div class="bg-layer"></div>
    <div class="particle-container" id="particles"></div>
  </div>

  <div class="theme-indicator" id="themeIndicator" onclick="switchTheme()">
    🌟
  </div>

  <div class="card">
    <div class="card-content">
      <div class="group-icon" onclick="iconClick()">
        <div class="icon-bg" id="groupIcon">🚀</div>
      </div>
      
      <h1 class="title">米哈游家庭</h1>
      <p class="subtitle">汇聚ACG爱好者，分享前沿技术<br>24小时在线交流，共同成长进步</p>
      
      <div class="group-info">
        <div class="info-item">
          <span class="info-number">5.2K+</span>
          <div class="info-label">活跃成员</div>
        </div>
        <div class="info-item">
          <span class="info-number">98%</span>
          <div class="info-label">在线率</div>
        </div>
        <div class="info-item">
          <span class="info-number">5★</span>
          <div class="info-label">群评分</div>
        </div>
      </div>
      
      <a class="join-btn" href="mqqapi://card/show_pslcard?src_type=internal&amp;version=1&amp;uin=807937569&amp;card_type=group&amp;source=qrcode" onclick="joinGroup(event)">✨ 立即加入群聊 ✨</a>
      
      <div class="loading" id="loading">
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
        <div class="loading-dot"></div>
      </div>
      
      <div class="env-info" id="envInfo">
        🔍 智能环境检测中...
      </div>
      
      <div class="time-info" id="timeInfo">
        📅 正在加载时间信息...
      </div>
    </div>
  </div>

  <script>
    class EnhancedQQCard {
      constructor() {
        this.themes = [
          { hue: 220, name: '科技蓝', emoji: '💙' },
          { hue: 280, name: '梦幻紫', emoji: '💜' },
          { hue: 340, name: '浪漫粉', emoji: '💗' },
          { hue: 120, name: '清新绿', emoji: '💚' },
          { hue: 45, name: '活力橙', emoji: '🧡' },
          { hue: 0, name: '热情红', emoji: '❤️' },
          { hue: 180, name: '天空青', emoji: '💎' }
        ];
        this.currentThemeIndex = 0;
        
        // 动漫人物表情列表
        this.animeCharacters = [
          '👾', '🎮', '🚀', '🌌', '👻', '🎯', '👨💻', '🎨', '🎵', '📱', '💡', '🌟'
        ];
        
        this.init();
        this.createParticles();
        this.startThemeRotation();
        this.detectEnvironment();
        this.updateTime();
        
        // 定时更新
        setInterval(() => this.updateTime(), 30000);
      }
      
      init() {
        // 初始化主题
        this.updateTheme();
        
        // 添加触摸事件优化
        this.addTouchOptimizations();
      }
      
      createParticles() {
        const container = document.getElementById('particles');
        const particleCount = Math.min(30, Math.floor(window.innerWidth / 40));
        
        for (let i = 0; i < particleCount; i++) {
          const particle = document.createElement('div');
          particle.className = 'particle';
          
          // 随机大小和位置
          const size = Math.random() * 6 + 3;
          particle.style.width = size + 'px';
          particle.style.height = size + 'px';
          particle.style.left = Math.random() * 100 + '%';
          particle.style.top = Math.random() * 100 + '%';
          
          // 随机动画延迟和持续时间
          particle.style.animationDelay = Math.random() * 8 + 's';
          particle.style.animationDuration = (Math.random() * 5 + 6) + 's';
          
          container.appendChild(particle);
        }
      }
      
      updateTheme() {
        const theme = this.themes[this.currentThemeIndex];
        const root = document.documentElement;
        
        root.style.setProperty('--primary-hue', theme.hue);
        root.style.setProperty('--secondary-hue', theme.hue + 60);
        root.style.setProperty('--accent-hue', theme.hue + 120);
        
        const indicator = document.getElementById('themeIndicator');
        indicator.textContent = theme.emoji;
        indicator.title = theme.name + ' 主题';
        
        // 添加切换动画
        document.body.style.animation = 'none';
        setTimeout(() => {
          document.body.style.animation = '';
        }, 10);
      }
      
      startThemeRotation() {
        // 每15秒自动切换主题
        setInterval(() => {
          this.currentThemeIndex = (this.currentThemeIndex + 1) % this.themes.length;
          this.updateTheme();
        }, 15000);
      }
      
      detectEnvironment() {
        const ua = navigator.userAgent;
        let envInfo = '';
        let emoji = '';
        let tips = '';
        
        // 详细环境检测
        if (/MicroMessenger/i.test(ua)) {
          emoji = '💬';
          envInfo = '微信浏览器';
          tips = '请点击右上角选择"在浏览器中打开"';
        } else if (/QQ\//i.test(ua)) {
          emoji = '🐧';
          envInfo = 'QQ浏览器';
          tips = '点击下方按钮即可直接加入群聊';
        } else if (/Tim\//i.test(ua)) {
          emoji = '💼';
          envInfo = 'TIM浏览器';
          tips = '办公版QQ，功能完整支持';
        } else {
          emoji = '🌐';
          envInfo = this.getBrowserName();
          tips = '建议复制链接到QQ中打开';
        }
        
        // 设备信息
        const isMobile = /Mobile|Android|iPhone|iPad/i.test(ua);
        const deviceEmoji = isMobile ? '📱' : '💻';
        const deviceType = isMobile ? '移动设备' : '桌面设备';
        
        // 系统信息
        const osEmoji = this.getOSEmoji();
        
        document.getElementById('envInfo').innerHTML = 
          `${emoji} <strong>${envInfo}</strong> • ${deviceEmoji} ${deviceType}<br><br>
           ${osEmoji} <small>${tips}</small>`;
      }
      
      getBrowserName() {
        const ua = navigator.userAgent;
        if (/Chrome/i.test(ua) && !/Edge/i.test(ua)) return 'Chrome';
        if (/Firefox/i.test(ua)) return 'Firefox';
        if (/Safari/i.test(ua) && !/Chrome/i.test(ua)) return 'Safari';
        if (/Edge/i.test(ua)) return 'Edge';
        if (/Opera|OPR/i.test(ua)) return 'Opera';
        return '未知浏览器';
      }
      
      getOSEmoji() {
        const ua = navigator.userAgent;
        if (/iPhone|iPad/i.test(ua)) return '🍎';
        if (/Android/i.test(ua)) return '🤖';
        if (/Windows/i.test(ua)) return '🪟';
        if (/Mac/i.test(ua)) return '🍎';
        if (/Linux/i.test(ua)) return '🐧';
        return '❓';
      }
      
      updateTime() {
        const now = new Date();
        const hour = now.getHours();
        const timeStr = now.toLocaleString('zh-CN', {
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit'
        });
        
        let emoji, greeting;
        
        if (hour >= 6 && hour < 12) {
          emoji = '🌅'; greeting = '早上好，新的一天开始了';
        } else if (hour >= 12 && hour < 18) {
          emoji = '☀️'; greeting = '下午好，继续加油努力';
        } else if (hour >= 18 && hour < 22) {
          emoji = '🌇'; greeting = '晚上好，放松一下吧';
        } else {
          emoji = '🌙'; greeting = '夜深了，注意休息哦';
        }
        
        document.getElementById('timeInfo').innerHTML = 
          `${emoji} ${timeStr} • ${greeting}`;
      }
      
      addTouchOptimizations() {
        // 防止双击缩放
        let lastTouchEnd = 0;
        document.addEventListener('touchend', (e) => {
          const now = Date.now();
          if (now - lastTouchEnd <= 300) {
            e.preventDefault();
          }
          lastTouchEnd = now;
        }, false);
        
        // 触摸反馈
        const touchElements = ['.join-btn', '.group-icon', '.theme-indicator'];
        touchElements.forEach(selector => {
          const elements = document.querySelectorAll(selector);
          elements.forEach(el => {
            el.addEventListener('touchstart', () => {
              el.style.transform = 'scale(0.95)';
            });
            
            el.addEventListener('touchend', () => {
              setTimeout(() => {
                el.style.transform = '';
              }, 100);
            });
          });
        });
      }
    }
    
    function switchTheme() {
      if (window.qqCard) {
        window.qqCard.currentThemeIndex = (window.qqCard.currentThemeIndex + 1) % window.qqCard.themes.length;
        window.qqCard.updateTheme();
        
        // 视觉反馈
        const indicator = document.getElementById('themeIndicator');
        indicator.style.transform = 'scale(1.2) rotate(180deg)';
        setTimeout(() => {
          indicator.style.transform = '';
        }, 300);
      }
    }
    
    function iconClick() {
      const icon = document.querySelector('.icon-bg');
      icon.style.animation = 'none';
      setTimeout(() => {
        icon.style.animation = '';
      }, 10);
      
      // 随机切换动漫人物表情
      const characters = window.qqCard.animeCharacters;
      const currentEmoji = document.getElementById('groupIcon').textContent;
      let newEmoji;
      
      // 确保不重复显示同一个表情
      do {
        newEmoji = characters[Math.floor(Math.random() * characters.length)];
      } while (newEmoji === currentEmoji);
      
      document.getElementById('groupIcon').textContent = newEmoji;
      
      // 添加点击特效
      const effect = document.createElement('div');
      effect.textContent = newEmoji;
      effect.style.cssText = `
        position: absolute;
        font-size: 28px;
        pointer-events: none;
        z-index: 1000;
        animation: popEffect 1.2s ease-out forwards;
      `;
      
      const rect = document.querySelector('.group-icon').getBoundingClientRect();
      effect.style.left = rect.left + rect.width / 2 + 'px';
      effect.style.top = rect.top + rect.height / 2 + 'px';
      
      document.body.appendChild(effect);
      setTimeout(() => effect.remove(), 1200);
    }
    
    function joinGroup(event) {
      const btn = event.target;
      const loading = document.getElementById('loading');
      
      // 显示加载动画
      btn.style.opacity = '0.7';
      loading.style.display = 'flex';
      
      // 使用QQ小程序URI方案唤起QQ并加入群聊
      const qqGroupUri = 'mqqapi://card/show_pslcard?src_type=internal&version=1&uin=807937569&card_type=group&source=qrcode';
      
      setTimeout(() => {
        try {
          // 尝试唤起QQ
          window.location.href = qqGroupUri;
          
          // 检测是否在QQ客户端内
          const ua = navigator.userAgent.toLowerCase();
          if (ua.indexOf('qq/') > -1 || ua.indexOf('qqlive/') > -1) {
            // QQ客户端内，直接跳转
            window.location.href = qqGroupUri;
          } else {
            // 非QQ客户端，提示用户
            alert('请先安装QQ客户端，或复制链接到QQ中打开');
          }
        } catch (error) {
          console.error('跳转出错:', error);
          alert('加入群聊失败，请手动打开QQ并搜索群号');
        } finally {
          // 隐藏加载动画
          setTimeout(() => {
            btn.style.opacity = '1';
            loading.style.display = 'none';
          }, 2000);
        }
      }, 500);
      
      event.preventDefault();
    }
    
    // 初始化卡片
    window.qqCard = new EnhancedQQCard();
  </script>


  </body></html>